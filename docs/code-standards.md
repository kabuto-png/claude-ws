# Code Standards & Structure

## File Naming
- Use `kebab-case` for all file names.
- Files should have meaningful names describing their purpose.

## React & TypeScript
- Use functional components with hooks.
- Prefer `useCallback` and `useMemo` for optimizing performance in large lists (like the Git Panel or File Browser).
- Ensure proper type definitions for all API responses and component props.
- Use `lucide-react` for iconography.
- Leverage Tailwind CSS for styling and Shadcn/UI for common components.

## API Standards
- **Endpoint Pattern**: `/api/{domain}/{action}` (e.g., `/api/git/commit`).
- **Methods**:
  - `GET`: Retrieve data.
  - `POST`: Create resource or perform complex action.
  - `PUT`/`PATCH`: Update resource.
  - `DELETE`: Remove resource.
- **Error Handling**: Always return JSON with an `error` field and appropriate HTTP status code.
- **Path Validation**: Strictly validate all input paths to prevent directory traversal attacks.

## Git Workflow Standards
- All commit messages generated by the system (AI or manual) should ideally follow [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/).
- Standard types: `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`.
- **Git Graph Visualization**:
  - Main/Master branches MUST be colored amber (#f59e0b).
  - Feature branches should use the deterministic 7-color palette.
  - Orphan commits (no parents/refs) MUST be colored gray (#6b7280).
  - Color assignment priority: Branch Refs > Orphan Status > Parent Inheritance > Lane Fallback.

## File Size Management
- Keep individual code files under 200 lines where possible.
- Extract complex UI sections into sub-components (e.g., `GitSection`, `GitFileItem`).
- Move complex business logic or SDK interactions to `src/lib`.

## AI Integration Standards
- Use the `@anthropic-ai/claude-agent-sdk` for AI interactions.
- Stream responses where possible for better user experience.
- Use `permissionMode: 'bypassPermissions'` only when necessary for server-side automated tasks (like commit message generation).
